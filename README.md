# My linux configurations (or Dotfiles)

These are used on Mint XFCE 19.1, Ubuntu and Cygwin.

These are settings for bash, vim, etc.


- [My linux configurations (or Dotfiles)](#my-linux-configurations-or-dotfiles)
    + [To install them](#to-install-them)
    + [Fix system crash](#fix-system-crash)
    + [To list all programs using a given port](#to-list-all-programs-using-a-given-port)
    + [Install Sublime Text](#install-sublime-text)
    + [Enable hibernation](#enable-hibernation)
    + [ksuperkey](#ksuperkey)
    + [Ksysguard & others](#ksysguard--others)
    + [chroot](#chroot)
    + [Optionally install KDE](#optionally-install-kde)
    + [Hide user account from login screen](#hide-user-account-from-login-screen)
    + [Install wine & others](#install-wine--others)
    + [Remove Default XFCE 4 Keybinds](#remove-default-xfce-4-keybinds)
    + [Create Default Keybinds](#create-default-keybinds)
    + [Linux system information](#linux-system-information)

* The table of contents used on this Markdown was generated by:
  1. `git clone https://github.com/evandroforks/markdown-toc`
  1. `cd markdown-toc`
  1. `npm -g install`
  1. `cd ../this-repository-root`
  1. `markdown-toc README.MD`


### To install them

First backup your settings, clone this repository using this command:
```
git clone --recursive https://github.com/evandrocoan/MyLinuxSettings.git ~/Downloads/MyLinuxSettings
```

And move them to your main's user folder replacing your own settings:
```
rsync -r -t -v -s ~/Downloads/MyLinuxSettings/ ~/
```

After installing, reload the `XFCE` components, so the settings does not get overridden.

This should reload the `XFCE` panel components:
```
xfce4-panel -r
```

For other components, research how it could be done, or just install the settings by using another
user account or desktop environment as KDE Plasma, Mate, Cinnamon, etc.


### Fix system crash

Disable Google Chrome hardware acceleration: https://www.lifewire.com/hardware-acceleration-in-chrome-4125122

Add `GRUB_CMDLINE_LINUX="i915.enable_rc6=0"` to `/etc/default/grub`:
1. https://unix.stackexchange.com/questions/401746/drm-i915-resetting-chip-after-gpu-hang
1. https://askubuntu.com/questions/857123/how-to-tweak-intel-hd-graphics-on-ubuntu-16-04
```
GRUB_CMDLINE_LINUX="i915.enable_rc6=0 i915.semaphores=0"
# after changing this, run
# sudo update-grub; sudo update-grub2
```


### To list all programs using a given port

```
sudo netstat -tulpn | grep 5060
```
1. https://www.cyberciti.biz/faq/what-process-has-open-linux-port/


### Install Sublime Text

1. https://www.sublimetext.com/3
1. Install StudioChannel:
   1. https://github.com/evandrocoan/ITE#installation-go-to-top
   1 `https://raw.githubusercontent.com/evandrocoan/StudioChannel/master/channel.json`
1. https://forum.sublimetext.com/t/multiple-sublime-processes-with-different-environment/34575

Setup it to start maximized with:
1. [.local/bin/](.local/bin/)
1. [.local/bin/open_maximized.sh](.local/bin/open_maximized.sh)
1. [.local/bin/SublimeTextMaximazed.sh](.local/bin/SublimeTextMaximazed.sh)


### Enable hibernation

Do not hibernate to a SWAP file because this is a new implementation and
it is very bugged.
It will take you computer from 10 to 30 minutes to come out from the hibernation,
if you hibernating to a SWAP file!
Create an SWAP Partition instead of a SWAP file to do hibernation!
Even if,
hibernating to a SWAP partition,
it takes from 5 to 30 minutes to come out from the hibernation,
you need to install an SSD drive of 16 or 32 GB,
depending on how much memory do you use.
Remember,
the SWAP partition must hold all you RAM memory,
including the actual virtual memory already on the SWAP partition.

1. Set swap file size to 20GG on the next step tutorial
1. https://forums.linuxmint.com/viewtopic.php?f=42&t=284100 [GUIDE] How to hibernate to a swap file in Linux Mint 19.x
1. https://forums.linuxmint.com/viewtopic.php?t=273202 How to enable hibernation with swap partion on Linux Mint 19
1. https://askubuntu.com/questions/33697/how-do-i-add-swap-after-system-installation
1. https://askubuntu.com/questions/343268/how-to-use-manual-partitioning-during-installation
1. https://www.cyberciti.biz/faq/linux-check-swap-usage-command/
1. https://askubuntu.com/questions/562153/can-swap-be-on-a-different-disk
1. https://askubuntu.com/questions/180730/how-do-i-restore-a-swap-partition-i-accidentally-deleted
1. https://www.cyberciti.biz/faq/linux-add-a-swap-file-howto/

Enable super user account login with `su`:
```sh
sudo passwd root

# https://askubuntu.com/questions/20450/disable-root-account-in-ubuntu
sudo passwd -l root
```

### ksuperkey

1. Clone and install https://github.com/hanschen/ksuperkey with `make` and `sudo make install`
1. Remove the `Super+L` to `xfce4-popup-whiskermenu` on `All Settings -> Keyboard -> Applications Shortcuts` and add it to `Super_L|m`
1. Then, run the command `ksuperkey -e 'Super_L=Super_L|m'` on system startup.


### Ksysguard & others

Add ppa repositories:
```
sudo add-apt-repository ppa:sporkwitch/autokey &&
sudo add-apt-repository ppa:hluk/copyq &&
sudo apt update
```

Install stuff:
```
sudo apt install build-essential autokey-gtk copyq mtp-tools gmtp imwheel openssh-server &&
sudo apt-get install flameshot nethogs python3 python-pip python3-pip &&
sudo apt-get install audacity gnome-gmail ksysguard wmctrl &&
sudo apt-get install xdotool grsync unison-gtk indicator-multiload &&
sudo apt-get install vim vim-gtk3 ncdu nemo glogg qps nemo-fileroller &&
sudo apt-get install libc6-dbg gsmartcontrol iotop fatrace &&
sudo apt-get install xfce4-terminal gnome-disk-utility speedcrunch &&
sudo apt-get install terminator &&
pip install setuptools &&
pip3 install setuptools &&
pip install wheel &&
pip3 install wheel python-language-server
```

1. `terminator` (to set terminator as default terminal on `nemo` file manager)
   1. `gsettings set org.cinnamon.desktop.default-applications.terminal exec 'xfce4-terminal'`
   1. https://github.com/linuxmint/nemo/issues/2091
1. `qps`
1. `glogg`
1. `ncdu`
1. `nethogs`
1. `speedcrunch`
1. `iotop` && `fatrace`
   1. https://unix.stackexchange.com/questions/86875/determining-specific-file-responsible-for-high-i-o
1. `gsmartcontrol`
1. `gnome-disks`
1. Open `Preferred Applications` and set mailto as `gnome-gmail`
1. Open `Preferred Applications` and set File Manger as `nemo`
1. Open `KSysGuard` & `System Monitor` and Install KSysGuard System Monitor Tabs:
   * Hard Disk Totals - https://store.kde.org/p/1198291
   * System Load and Temps - https://store.kde.org/p/1198291
1. Open `Unisson` & `Grsync`
1. Add `System Load Monitor` widget to the main panel
1. Create keybind `,` (numpad comma), `autokey-run -p insert_dot`
   1. https://github.com/autokey/autokey
   1. Run `autokey-gtk --verbose &` for debugging it
1. https://unix.stackexchange.com/questions/192048/mount-mtp-android-device-in-linux-mint-17-1
1. https://unix.stackexchange.com/questions/389952/how-to-get-the-samsung-galaxy-s5-to-work-with-mtp-on-debian-9
1. Run `imwheel -b "4 5"`on system start up
   1. Create `~/.imwheelrc` with:
      * [.imwheelrc](.imwheelrc)
   1. https://wiki.archlinux.org/index.php/IMWheel
      * Use `imwheel -d --debug --kill` to list windows
   1. Use `sudo killall -9 imwheel; sleep 2; imwheel` to restart the service
   1. https://askubuntu.com/questions/285689/increase-mouse-wheel-scroll-speed
   1. https://mintguide.org/other/643-setup-the-mouse-scroll-wheel-speed.html#sel=13:4,13:14


### chroot

1. `sudo apt-get install debootstrap schroot`
1. Create an isolated environment with `chroot` (it will inherit your $HOME environment variable, etc)
   ```sh
   mkdir /myfiles/ubuntu_xenial_1604
   debootstrap --arch=amd64 xenial /myfiles/ubuntu_xenial_1604 http://archive.ubuntu.com/ubuntu/
   locale-gen "en_US.UTF-8"
   locale-gen "pt_BR.UTF-8"
   cp /usr/share/i18n/SUPPORTED /etc/locale.gen
   locale-gen
   dpkg-reconfigure locales
   apt-get install linux-headers-$(uname -r) gcc dialog unzip psmisc
   ```
1. `mkdir -p /myfiles/ubuntu_xenial_1604/home/$USER/`
1. Add main machine resources to chroot nested machine
   1. `mkdir -p /myfiles/ubuntu_xenial_1604/proc/`
   1. `mkdir -p /myfiles/ubuntu_xenial_1604/sys/`
   1. `mkdir -p /myfiles/ubuntu_xenial_1604/dev/pts`
   1. `sudo mount -t proc proc /myfiles/ubuntu_xenial_1604/proc/`
   1. `sudo mount -t sysfs sys /myfiles/ubuntu_xenial_1604/sys/`
   1. `sudo mount -o bind /dev /myfiles/ubuntu_xenial_1604/dev/`
   1. `sudo mount -t devpts pts dev/pts/`
   1. https://wiki.archlinux.org/index.php/Chroot
   1. https://unix.stackexchange.com/questions/98405/which-of-proc-sys-etc-should-be-bind-mounted
1. Or edit fstab:
   * https://askubuntu.com/questions/550348/how-to-make-mount-bind-permanent
   ```sh
   # <device>                             <dir>   <type>  <options>   <dump>  <pass>
   /myfiles/ubuntu_xenial_1604/proc/      /proc    auto    -t,proc       0      1
   /myfiles/ubuntu_xenial_1604/sys/       /sys     auto    -t,sysfs      0      1
   /myfiles/ubuntu_xenial_1604/dev/pts    /dev     auto    -t,devpts     0      1
   /myfiles/ubuntu_xenial_1604/dev/       /dev     auto    -o,bind       0      1
   ```
1. `sudo mount --bind /usr/local/something /myfiles/ubuntu_xenial_1604/mnt/something`
   * Optionally, mount something inside the new Linux
   * `sudo umount /myfiles/ubuntu_xenial_1604/mnt/something`
1. Generate a new list of sources and add them to the file **/etc/apt/sources.list**
   * https://repogen.simplylinux.ch/
   ```
   #------------------------------------------------------------------------------#
   #                            OFFICIAL UBUNTU REPOS                             #
   #------------------------------------------------------------------------------#

   ###### Ubuntu Main Repos
   deb http://55.archive.ubuntu.com/ubuntu/ xenial main restricted universe multiverse
   deb-src http://55.archive.ubuntu.com/ubuntu/ xenial main restricted universe multiverse

   ###### Ubuntu Update Repos
   deb http://55.archive.ubuntu.com/ubuntu/ xenial-security main restricted universe multiverse
   deb http://55.archive.ubuntu.com/ubuntu/ xenial-updates main restricted universe multiverse
   deb http://55.archive.ubuntu.com/ubuntu/ xenial-proposed main restricted universe multiverse
   deb http://55.archive.ubuntu.com/ubuntu/ xenial-backports main restricted universe multiverse
   deb-src http://55.archive.ubuntu.com/ubuntu/ xenial-security main restricted universe multiverse
   deb-src http://55.archive.ubuntu.com/ubuntu/ xenial-updates main restricted universe multiverse
   deb-src http://55.archive.ubuntu.com/ubuntu/ xenial-proposed main restricted universe multiverse
   deb-src http://55.archive.ubuntu.com/ubuntu/ xenial-backports main restricted universe multiverse

   ###### Ubuntu Partner Repo
   deb http://archive.canonical.com/ubuntu xenial partner
   deb-src http://archive.canonical.com/ubuntu xenial partner
   ```
1. https://help.ubuntu.com/community/BasicChroot
1. https://help.ubuntu.com/community/DebootstrapChroot


### Optionally install KDE

1. 1 GB to install
   * `sudo apt-get install kde-standard kwin-addons`
1. 28 MB to install
   * `sudo apt install budgie-desktop-environment`
1. 128 MB to install
   * http://ubuntuhandbook.org/index.php/2018/11/install-cinnamon-desktop-4-0-ubuntu-18-04/
   * `sudo apt-get install cinnamon-desktop-environment`
   * Install applets:
     1. Cinnamenu
     1. Show desktop ++
     1. Collapsible Systray
     1. System Monitor


### Hide user account from login screen

Open **/var/lib/AccountsService/users/XXX** and add:
```
[User]
SystemAccount=true
```
1. https://forums.linuxmint.com/viewtopic.php?t=212990


### Install wine & others

1. Software Manager -> Twinkle -> Install
1. https://www.virtualbox.org/wiki/Linux_Downloads
1. http://wiki.octave.org/Octave_for_Debian_systems
1. https://wiki.winehq.org/Ubuntu
1. https://www.cockos.com/licecap/
1. https://github.com/balena-io/etcher
1. https://askubuntu.com/questions/785657/i-cant-install-gnome-schedule-on-ubuntu-16-04
1. https://askubuntu.com/questions/779946/how-do-i-install-lastfm-scrobblernewbie-at-ubuntu-stuff
1. http://www.aimp2.us/aimp3-download.php (install inside wine)
1. https://www.last.fm/about/trackmymusic?platform=windows (install inside wine)
1. https://askubuntu.com/questions/138908/how-to-execute-a-script-just-by-double-clicking-like-exe-files-in-windows
1. https://www.teamviewer.com/pt-br/download/linux/
1. https://askubuntu.com/questions/700712/how-to-install-wireshark
1. https://www.syntevo.com/smartgit/download/
   Sometimes ignored directories are containing tracked files in which case changes to these files might not show up automatically. If this is the case for you, you may disable this optimization by setting system property 'fileMonitor.excludeIgnoredDirectories=false'.


### Remove Default XFCE 4 Keybinds

1. All Settings -> Window Manger -> Keyboard ->
   * Raise Window, `Alt+Shift+PgUp`
   * Lower Window, `Alt+Shift+PgDown`


### Create Default Keybinds

1. `Ctrl+Alt+J`, subl -n
1. `Ctrl+Alt+O`, gnome-calculator
1. `Ctrl+Alt+H`, gnome-system-monitor
1. `Ctrl+Print`, flameshot gui
1. [.local/bin/play_stop_music.sh](.local/bin/play_stop_music.sh)
   1. `Pause`, play_stop_music.sh space
   1. `Alt+Super+Up`, play_stop_music.sh Up
   1. `Alt+Super+Down`, play_stop_music.sh Down
   1. `Alt+Super+Left`, play_stop_music.sh F1
   1. `Alt+Super+Right`, play_stop_music.sh F2
1. `Alt+Super+0`, wmctrl -x -a aimp.exe.Wine
1. `Alt+Super+1`, wmctrl -x -a minilyrics.exe.Wine
   * To list active windows use `wmctrl -lx`

**`/home/evandro/.local/share/applications/lastfm.desktop`**
```
[Desktop Entry]
Version=1.1
Type=Application
Name=Last.fm
Comment=Listen to Last.fm radio
Icon=lastfm
Exec=wine "/home/evandro/.wine/dosdevices/c:/Program Files (x86)/Last.fm/Last.fm Scrobbler.exe"
Actions=
Categories=Audio;AudioVideo;Qt;
StartupNotify=true
```

**`/home/evandro/.local/share/applications/menulibre-aimp3.desktop`**
```
[Desktop Entry]
Version=1.1
Type=Application
Name=AIMP3
Comment=Music Player running on Wine
Icon=applications-other
Exec=wine "/home/evandro/Programs/AIMP3/AIMP.exe"
Actions=
Categories=AudioVideo;
```

**`/home/evandro/.local/share/applications/menulibre-minilyrics-wine.desktop`**
```
[Desktop Entry]
Version=1.1
Type=Application
Name=Minilyrics Wine
Comment=A small descriptive blurb about this application.
Icon=applications-other
Exec=wine "/home/evandro/.wine/dosdevices/c:/Program Files (x86)/MiniLyrics/MiniLyrics.exe"
Actions=
Categories=AudioVideo;
```


### Linux system information
```
$ inxi -Fxz

System:    Host: evandro-pc Kernel: 4.15.0-45-generic x86_64 bits: 64 compiler: gcc v: 7.3.0 Desktop: Xfce 4.12.3
           Distro: Linux Mint 19.1 Tessa base: Ubuntu 18.04 bionic
Machine:   Type: Desktop System: Gigabyte product: H110M-S2PH v: N/A serial: <filter>
           Mobo: Gigabyte model: H110M-S2PH-CF v: x.x serial: <filter> UEFI: American Megatrends v: F21 date: 06/09/2017
CPU:       Topology: Quad Core model: Intel Core i5-7400 bits: 64 type: MCP arch: Kaby Lake rev: 9 L2 cache: 6144 KiB
           flags: lm nx pae sse sse2 sse3 sse4_1 sse4_2 ssse3 vmx bogomips: 24000
           Speed: 800 MHz min/max: 800/3500 MHz Core speeds (MHz): 1: 800 2: 800 3: 800 4: 800
Graphics:  Device-1: Intel HD Graphics 630 vendor: Gigabyte driver: i915 v: kernel bus ID: 00:02.0
           Display: x11 server: X.Org 1.19.6 driver: modesetting unloaded: fbdev,vesa resolution: 1920x1080~60Hz
           OpenGL: renderer: Mesa DRI Intel HD Graphics 630 (Kaby Lake GT2) v: 4.5 Mesa 18.2.2 direct render: Yes
Audio:     Device-1: Intel 100 Series/C230 Series Family HD Audio vendor: Gigabyte Sunrise Point-H driver: snd_hda_intel
           v: kernel bus ID: 00:1f.3
           Sound Server: ALSA v: k4.15.0-45-generic
Network:   Device-1: Realtek RTL8111/8168/8411 PCI Express Gigabit Ethernet vendor: Gigabyte driver: r8169 v: 2.3LK-NAPI
           port: e000 bus ID: 01:00.0
           IF: enp1s0 state: up speed: 1000 Mbps duplex: full mac: <filter>
Drives:    Local Storage: total: 931.51 GiB used: 47.82 GiB (5.1%)
           ID-1: /dev/sda vendor: Western Digital model: WD10EZEX-00WN4A0 size: 931.51 GiB
Partition: ID-1: / size: 907.63 GiB used: 47.81 GiB (5.3%) fs: ext4 dev: /dev/dm-0
Sensors:   System Temperatures: cpu: 29.8 C mobo: 27.8 C
           Fan Speeds (RPM): N/A
Info:      Processes: 236 Uptime: 1h 13m Memory: 7.68 GiB used: 4.39 GiB (57.2%) Init: systemd runlevel: 5 Compilers:
           gcc: 7.3.0 Shell: bash v: 4.4.19 inxi: 3.0.27
```



